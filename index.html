<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neurodivergenz-Toolkit</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1a1a2e;
            color: #eee;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #f39c12;
        }

        .navigation {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
        }

        .nav-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 12px;
            background: #2c3e50;
            color: white;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s ease;
        }

        .nav-btn.active {
            background: #f39c12;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .energy-display {
            background: #16213e;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        .spoons-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }

        .spoon {
            font-size: 40px;
            transition: all 0.3s ease;
        }

        .spoon.full {
            filter: brightness(1);
        }

        .spoon.empty {
            filter: brightness(0.3);
            opacity: 0.5;
        }

        .energy-number {
            font-size: 48px;
            font-weight: bold;
            margin: 20px 0;
        }

        .energy-status {
            font-size: 20px;
            padding: 10px 20px;
            border-radius: 25px;
            display: inline-block;
        }

        .status-good {
            background: #27ae60;
        }

        .status-warning {
            background: #f39c12;
            animation: pulse 2s infinite;
        }

        .status-critical {
            background: #e74c3c;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .activities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .activity-btn {
            background: #2c3e50;
            border: none;
            border-radius: 10px;
            padding: 15px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .activity-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .activity-btn.energy-gain {
            background: #27ae60;
        }

        .activity-btn.energy-drain-low {
            background: #34495e;
        }

        .activity-btn.energy-drain-medium {
            background: #7f8c8d;
        }

        .activity-btn.energy-drain-high {
            background: #c0392b;
        }

        .energy-cost {
            font-size: 20px;
            font-weight: bold;
        }

        .undo-container {
            margin-top: 20px;
            height: 40px;
        }

        .undo-btn {
            background: #e67e22;
            border: none;
            border-radius: 10px;
            padding: 10px 20px;
            color: white;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .undo-btn:hover {
            transform: scale(1.05);
            background: #d35400;
        }

        .history {
            background: #16213e;
            border-radius: 15px;
            padding: 20px;
            margin-top: 30px;
        }

        .history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #2c3e50;
        }

        .history-item:last-child {
            border-bottom: none;
        }

        .history-item-content {
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
        }

        .history-item-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .delete-btn {
            background: transparent;
            border: none;
            color: #e74c3c;
            cursor: pointer;
            font-size: 18px;
            padding: 5px;
            opacity: 0.7;
            transition: all 0.2s ease;
        }

        .delete-btn:hover {
            opacity: 1;
            transform: scale(1.2);
        }

        .reset-day {
            background: #e74c3c;
            border: none;
            border-radius: 10px;
            padding: 15px 30px;
            color: white;
            cursor: pointer;
            font-size: 16px;
            display: block;
            margin: 20px auto;
            transition: all 0.3s ease;
        }

        .reset-day:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .morning-checkin {
            background: #16213e;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
        }

        .slider {
            width: 100%;
            margin: 20px 0;
        }

        .slider-value {
            font-size: 24px;
            font-weight: bold;
            color: #f39c12;
        }

        input[type="range"] {
            width: 100%;
            height: 10px;
            border-radius: 5px;
            background: #2c3e50;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #f39c12;
            cursor: pointer;
        }

        input[type="range"]::-moz-range-thumb {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #f39c12;
            cursor: pointer;
            border: none;
        }

        .start-day-btn {
            background: #27ae60;
            border: none;
            border-radius: 10px;
            padding: 15px 30px;
            color: white;
            cursor: pointer;
            font-size: 18px;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .start-day-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .hidden {
            display: none;
        }

        /* Statistics Styles */
        .stats-container {
            background: #16213e;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: #2c3e50;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }

        .stat-card h3 {
            color: #f39c12;
            margin-bottom: 10px;
        }

        .stat-value {
            font-size: 36px;
            font-weight: bold;
            margin: 10px 0;
        }

        .export-import {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }

        .export-btn, .import-btn {
            background: #27ae60;
            border: none;
            border-radius: 10px;
            padding: 12px 24px;
            color: white;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .export-btn:hover, .import-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .import-input {
            display: none;
        }

        .insights {
            background: #16213e;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .insight-item {
            padding: 15px;
            margin: 10px 0;
            background: #2c3e50;
            border-radius: 10px;
            border-left: 4px solid #f39c12;
        }

        .top-activities {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .activity-stat {
            background: #2c3e50;
            border-radius: 10px;
            padding: 20px;
        }

        .activity-stat.drain {
            border-top: 3px solid #e74c3c;
        }

        .activity-stat.gain {
            border-top: 3px solid #27ae60;
        }

        .activity-stat h4 {
            color: #f39c12;
            margin-bottom: 15px;
            text-align: center;
        }

        .activity-stat p {
            margin: 8px 0;
            display: flex;
            justify-content: space-between;
        }
  
  /* Mini-Motivator Styles */
.motivator-container {
    max-width: 900px;
    margin: 0 auto;
    padding: 20px;
}

.motivator-container h2 {
    text-align: center;
    color: #f39c12;
    margin-bottom: 10px;
}

.motivator-subtitle {
    text-align: center;
    color: #bbb;
    font-size: 18px;
    margin-bottom: 30px;
}

.mood-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 15px;
    margin-bottom: 30px;
}

.mood-btn {
    background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
    border: none;
    border-radius: 15px;
    padding: 20px;
    color: white;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: left;
    display: flex;
    flex-direction: column;
    gap: 8px;
    position: relative;
    overflow: hidden;
}

.mood-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    background: linear-gradient(135deg, #3a4f66 0%, #4a5f7a 100%);
}

.mood-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
    transition: left 0.5s ease;
}

.mood-btn:hover::before {
    left: 100%;
}

.mood-icon {
    font-size: 32px;
    margin-bottom: 5px;
}

.mood-name {
    font-size: 18px;
    font-weight: bold;
    color: #f39c12;
}

.mood-desc {
    font-size: 14px;
    color: #bbb;
    line-height: 1.3;
}

.unknown-btn {
    background: linear-gradient(135deg, #8e44ad 0%, #9b59b6 100%) !important;
    border: 2px dashed rgba(255,255,255,0.3);
}

.unknown-btn:hover {
    background: linear-gradient(135deg, #a569bd 0%, #bb8fce 100%) !important;
}

.suggestion-display {
    text-align: center;
    animation: fadeIn 0.5s ease;
}

.suggestion-card {
    background: linear-gradient(135deg, #16213e 0%, #1a2b4a 100%);
    border-radius: 20px;
    padding: 40px;
    margin-bottom: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    border: 1px solid rgba(243, 156, 18, 0.2);
}

.suggestion-card h3 {
    color: #f39c12;
    margin-bottom: 25px;
    font-size: 24px;
}

.suggestion-content {
    font-size: 20px;
    line-height: 1.6;
    margin-bottom: 30px;
    color: #eee;
    padding: 20px;
    background: rgba(255,255,255,0.05);
    border-radius: 10px;
    border-left: 4px solid #f39c12;
}

.suggestion-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 20px;
    flex-wrap: wrap;
}

.try-again-btn {
    background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
    border: none;
    border-radius: 25px;
    padding: 12px 25px;
    color: white;
    cursor: pointer;
    font-size: 16px;
    transition: all 0.3s ease;
}

.try-again-btn:hover {
    transform: scale(1.05);
    box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
}

.feedback-buttons {
    display: flex;
    gap: 15px;
}

.feedback-btn {
    background: #2c3e50;
    border: 2px solid transparent;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    cursor: pointer;
    font-size: 20px;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.feedback-btn.good:hover {
    background: #27ae60;
    border-color: #2ecc71;
    transform: scale(1.1);
}

.feedback-btn.bad:hover {
    background: #e74c3c;
    border-color: #c0392b;
    transform: scale(1.1);
}

.feedback-btn.selected {
    transform: scale(1.1);
}

.feedback-btn.good.selected {
    background: #27ae60;
    border-color: #2ecc71;
}

.feedback-btn.bad.selected {
    background: #e74c3c;
    border-color: #c0392b;
}

.back-to-moods-btn {
    background: transparent;
    border: 2px solid #7f8c8d;
    border-radius: 25px;
    padding: 12px 25px;
    color: #7f8c8d;
    cursor: pointer;
    font-size: 16px;
    transition: all 0.3s ease;
}

.back-to-moods-btn:hover {
    border-color: #f39c12;
    color: #f39c12;
    transform: translateX(-5px);
}

.favorites-section {
    margin-top: 30px;
    padding: 20px;
    background: rgba(22, 33, 62, 0.5);
    border-radius: 15px;
    border: 1px solid rgba(243, 156, 18, 0.2);
}

.favorites-section h3 {
    color: #f39c12;
    margin-bottom: 15px;
    text-align: center;
}

.favorites-list {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center;
}

.favorite-item {
    background: #27ae60;
    border: none;
    border-radius: 20px;
    padding: 8px 15px;
    color: white;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.3s ease;
}

.favorite-item:hover {
    background: #2ecc71;
    transform: scale(1.05);
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Mobile Anpassungen */
@media (max-width: 600px) {
    .mood-grid {
        grid-template-columns: 1fr;
    }
    
    .suggestion-card {
        padding: 25px;
    }
    
    .suggestion-actions {
        flex-direction: column;
        gap: 15px;
    }
    
    .feedback-buttons {
        justify-content: center;
    }
}

/* Anti-To-Do Tracker Styles */
.antitodo-container {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
}

.antitodo-container h2 {
    text-align: center;
    color: #f39c12;
    margin-bottom: 10px;
}

.antitodo-subtitle {
    text-align: center;
    color: #bbb;
    font-size: 16px;
    margin-bottom: 40px;
}

.achievement-center {
    text-align: center;
    margin-bottom: 40px;
}

.big-achievement-btn {
    background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
    border: none;
    border-radius: 25px;
    padding: 30px 50px;
    color: white;
    cursor: pointer;
    font-size: 20px;
    font-weight: bold;
    transition: all 0.3s ease;
    box-shadow: 0 8px 20px rgba(243, 156, 18, 0.3);
    display: flex;
    align-items: center;
    gap: 15px;
    margin: 0 auto;
}

.big-achievement-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 30px rgba(243, 156, 18, 0.4);
    background: linear-gradient(135deg, #e67e22 0%, #d35400 100%);
}

.achievement-icon {
    font-size: 32px;
    animation: bounce 2s infinite;
}

@keyframes bounce {
    0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
    40% { transform: translateY(-10px); }
    60% { transform: translateY(-5px); }
}

@keyframes fadeOut {
    from { opacity: 1; transform: translate(-50%, -50%) scale(1); }
    to { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
}

.achievement-input {
    margin-bottom: 30px;
    animation: slideIn 0.3s ease;
}

.input-card {
    background: linear-gradient(135deg, #16213e 0%, #1a2b4a 100%);
    border-radius: 20px;
    padding: 30px;
    border: 1px solid rgba(243, 156, 18, 0.2);
}

.input-card h3 {
    color: #f39c12;
    margin-bottom: 20px;
    text-align: center;
}

#achievementText {
    width: 100%;
    background: rgba(255,255,255,0.1);
    border: 1px solid rgba(243, 156, 18, 0.3);
    border-radius: 10px;
    padding: 15px;
    color: #eee;
    font-size: 16px;
    resize: vertical;
    min-height: 80px;
    margin-bottom: 20px;
}

#achievementText:focus {
    outline: none;
    border-color: #f39c12;
    box-shadow: 0 0 10px rgba(243, 156, 18, 0.3);
}

.quick-suggestions {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 25px;
}

.suggestion-chip {
    background: rgba(243, 156, 18, 0.2);
    border: 1px solid rgba(243, 156, 18, 0.4);
    border-radius: 20px;
    padding: 8px 15px;
    color: #f39c12;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.3s ease;
}

.suggestion-chip:hover {
    background: rgba(243, 156, 18, 0.3);
    transform: scale(1.05);
}

.input-actions {
    display: flex;
    gap: 15px;
    justify-content: center;
}

.save-achievement {
    background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
    border: none;
    border-radius: 25px;
    padding: 12px 30px;
    color: white;
    cursor: pointer;
    font-size: 16px;
    font-weight: bold;
    transition: all 0.3s ease;
}

.save-achievement:hover {
    transform: scale(1.05);
    box-shadow: 0 5px 15px rgba(46, 204, 113, 0.4);
}

.cancel-input {
    background: transparent;
    border: 2px solid #7f8c8d;
    border-radius: 25px;
    padding: 10px 25px;
    color: #7f8c8d;
    cursor: pointer;
    font-size: 16px;
    transition: all 0.3s ease;
}

.cancel-input:hover {
    border-color: #bdc3c7;
    color: #bdc3c7;
}

.todays-achievements, .courage-archive {
    background: rgba(22, 33, 62, 0.6);
    border-radius: 15px;
    padding: 25px;
    margin-bottom: 25px;
    border: 1px solid rgba(243, 156, 18, 0.2);
}

.todays-achievements h3, .courage-archive h3 {
    color: #f39c12;
    margin-bottom: 20px;
    text-align: center;
}

.achievement-item {
    background: rgba(46, 204, 113, 0.1);
    border-left: 4px solid #2ecc71;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    animation: achievementPop 0.5s ease;
}

@keyframes achievementPop {
    0% { transform: scale(0.8); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
}

.achievement-text-content {
    flex: 1;
    color: #eee;
    line-height: 1.4;
}

.achievement-time {
    color: #95a5a6;
    font-size: 12px;
    margin-left: 15px;
}

.delete-achievement {
    background: transparent;
    border: none;
    color: #e74c3c;
    cursor: pointer;
    font-size: 16px;
    opacity: 0.7;
    padding: 5px;
    margin-left: 10px;
    transition: all 0.2s ease;
}

.delete-achievement:hover {
    opacity: 1;
    transform: scale(1.2);
}

.show-archive-btn {
    background: rgba(243, 156, 18, 0.2);
    border: 1px solid rgba(243, 156, 18, 0.4);
    border-radius: 10px;
    padding: 10px 20px;
    color: #f39c12;
    cursor: pointer;
    width: 100%;
    margin-top: 15px;
    transition: all 0.3s ease;
}

.show-archive-btn:hover {
    background: rgba(243, 156, 18, 0.3);
}

.archive-summary {
    text-align: center;
    font-size: 18px;
    color: #2ecc71;
    margin-bottom: 15px;
    font-weight: bold;
}

.antitodo-settings {
    text-align: center;
    padding: 20px;
}

.reminder-toggle {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    color: #bbb;
    cursor: pointer;
}

.reminder-toggle input[type="checkbox"] {
    width: 18px;
    height: 18px;
    accent-color: #f39c12;
}

/* Mobile Anpassungen */
@media (max-width: 600px) {
    .big-achievement-btn {
        padding: 25px 35px;
        font-size: 18px;
    }
    
    .quick-suggestions {
        flex-direction: column;
    }
    
    .suggestion-chip {
        text-align: center;
    }
    
    .input-actions {
        flex-direction: column;
    }
}
  
    </style>
</head>
<body>
    
    <div class="container">
        <h1>ü•Ñ AuDHS Energie-Tracker</h1>
        
        <div class="navigation hidden" id="navigation">
            <button class="nav-btn active" onclick="showPage('tracker')">Tracker</button>
            <button class="nav-btn" onclick="showPage('stats')">Statistiken</button>
            <button class="nav-btn" onclick="showPage('motivator')">Mini-Motivator</button>
            <button class="nav-btn" onclick="showPage('antitodo')">Anti-To-Do</button>
        </div>
        

        <!-- Tracker Page -->
        <div class="page active" id="trackerPage">
            <div class="morning-checkin" id="morningCheckin">
                <h2>Guten Morgen! Wie viele L√∂ffel hast du heute?</h2>
                <input type="range" min="1" max="10" value="8" class="slider" id="morningSlider">
                <div class="slider-value" id="sliderValue">8 L√∂ffel</div>
                <button class="start-day-btn" onclick="startDay()">Tag starten</button>
            </div>

            <div class="energy-display hidden" id="mainDisplay">
                <h2>Deine Energie heute</h2>
                <div class="spoons-container" id="spoonsContainer"></div>
                <div class="energy-number" id="energyNumber">8 / 10</div>
                <div class="energy-status status-good" id="energyStatus">Alles im gr√ºnen Bereich!</div>
                <div class="undo-container" id="undoContainer"></div>
            </div>

            <div class="activities-grid hidden" id="activitiesGrid"></div>

            <div class="history hidden" id="history">
                <h3>Heutiger Verlauf</h3>
                <div id="historyList"></div>
            </div>

            <button class="reset-day hidden" id="resetBtn" onclick="resetDay()">Tag abschlie√üen & Neuer Tag</button>
        </div>
        
        
        <!-- Statistics Page -->
        <div class="page" id="statsPage">
            <div class="stats-container">
                <h2>Deine Energie-Statistiken</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Getrackte Tage</h3>
                        <div class="stat-value" id="totalDays">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>√ò Startenergie</h3>
                        <div class="stat-value" id="avgStart">-</div>
                    </div>
                    <div class="stat-card">
                        <h3>√ò Endenergie</h3>
                        <div class="stat-value" id="avgEnd">-</div>
                    </div>
                </div>

                <div class="insights">
                    <h3>Erkenntnisse</h3>
                    <div id="insightsList"></div>
                </div>

                <div class="top-activities">
                    <div class="activity-stat drain">
                        <h4>Gr√∂√üte Energier√§uber</h4>
                        <div id="topDrains"></div>
                    </div>
                    <div class="activity-stat gain">
                        <h4>Beste Energiequellen</h4>
                        <div id="topGains"></div>
                    </div>
                </div>

                <div class="export-import">
                    <button class="export-btn" onclick="exportData()">üì• Daten exportieren</button>
                    <button class="import-btn" onclick="document.getElementById('importInput').click()">üì§ Daten importieren</button>
                    <input type="file" id="importInput" class="import-input" accept=".json" onchange="importData(event)">
                </div>
            </div>
        </div>
      
        <!-- Mini-Motivator Page -->
        <div class="page" id="motivatorPage">
            <div class="motivator-container">
                <h2>üß† Mini-Motivator</h2>
                <p class="motivator-subtitle">Wie f√ºhlst du dich gerade?</p>
                
                <!-- Gef√ºhlszust√§nde -->
                <div class="mood-grid" id="moodGrid">
                    <button class="mood-btn" onclick="selectMood('√ºberfordert', 'üòµ')">
                        <span class="mood-icon">üòµ</span>
                        <span class="mood-name">√úberfordert</span>
                        <span class="mood-desc">Ich wei√ü nicht, wo ich anfangen soll</span>
                    </button>
                    
                    <button class="mood-btn" onclick="selectMood('lethargisch', 'üò©')">
                        <span class="mood-icon">üò©</span>
                        <span class="mood-name">Lethargisch</span>
                        <span class="mood-desc">Ich will was tun, aber komm nicht in Gang</span>
                    </button>
                    
                    <button class="mood-btn" onclick="selectMood('verknotet', 'üåÄ')">
                        <span class="mood-icon">üåÄ</span>
                        <span class="mood-name">Verknotet</span>
                        <span class="mood-desc">3 Gedanken gleichzeitig, keine Klarheit</span>
                    </button>
                    
                    <button class="mood-btn" onclick="selectMood('unruhig', '‚ö°')">
                        <span class="mood-icon">‚ö°</span>
                        <span class="mood-name">Unruhig</span>
                        <span class="mood-desc">Rastlos, aber kann nichts greifen</span>
                    </button>
                    
                    <button class="mood-btn" onclick="selectMood('blockiert', 'üò∂')">
                        <span class="mood-icon">üò∂</span>
                        <span class="mood-name">Blockiert</span>
                        <span class="mood-desc">Sollte was tun, kann's nicht ansteuern</span>
                    </button>
                    
                    <button class="mood-btn" onclick="selectMood('√ºberreizt', 'üßØ')">
                        <span class="mood-icon">üßØ</span>
                        <span class="mood-name">√úberreizt</span>
                        <span class="mood-desc">Zu viele Eindr√ºcke, brauch R√ºckzug</span>
                    </button>
                    
                    <button class="mood-btn" onclick="selectMood('prokrastinierend', 'ü´†')">
                        <span class="mood-icon">ü´†</span>
                        <span class="mood-name">Prokrastinierend</span>
                        <span class="mood-desc">Tue alles au√üer dem Wichtigen</span>
                    </button>
                    
                    <button class="mood-btn" onclick="selectMood('hyperfokussiert', 'üöÄ')">
                        <span class="mood-icon">üöÄ</span>
                        <span class="mood-name">Hyperfokussiert</span>
                        <span class="mood-desc">Tief drin, vergesse alles drumrum</span>
                    </button>
                    
                    <button class="mood-btn" onclick="selectMood('verloren', '‚òÅÔ∏è')">
                        <span class="mood-icon">‚òÅÔ∏è</span>
                        <span class="mood-name">Verloren</span>
                        <span class="mood-desc">Wei√ü nicht, was ich brauche</span>
                    </button>
                    
                    <button class="mood-btn" onclick="selectMood('taub', 'üßä')">
                        <span class="mood-icon">üßä</span>
                        <span class="mood-name">Taub</span>
                        <span class="mood-desc">F√ºhle nichts / bin eingefroren</span>
                    </button>
                    
                    <button class="mood-btn unknown-btn" onclick="selectMood('unbekannt', 'ü§∑')">
                        <span class="mood-icon">ü§∑</span>
                        <span class="mood-name">Ich wei√ü es nicht</span>
                        <span class="mood-desc">Schlag mir einfach was Sanftes vor</span>
                    </button>
                </div>
                
                <!-- Suggestion Display -->
                <div class="suggestion-display hidden" id="suggestionDisplay">
                    <div class="suggestion-card">
                        <h3>üí´ Versuch doch mal:</h3>
                        <div class="suggestion-content" id="suggestionContent"></div>
                        
                        <div class="suggestion-actions">
                            <button class="try-again-btn" onclick="getNewSuggestion()">
                                üîÑ Anderer Vorschlag
                            </button>
                            <div class="feedback-buttons">
                                <button class="feedback-btn good" onclick="giveFeedback(true)" title="Hat geholfen">
                                    üëç
                                </button>
                                <button class="feedback-btn bad" onclick="giveFeedback(false)" title="Hat nicht geholfen">
                                    üëé
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <button class="back-to-moods-btn" onclick="backToMoods()">
                        ‚Üê Zur√ºck zu den Gef√ºhlen
                    </button>
                </div>
                
                <!-- Quick Favorites (wenn vorhanden) -->
                <div class="favorites-section hidden" id="favoritesSection">
                    <h3>‚≠ê Deine Favoriten</h3>
                    <div class="favorites-list" id="favoritesList"></div>
                </div>
            </div>
        </div>

        <!-- Anti-To-Do Page -->
        <div class="page" id="antitodoPage">
            <div class="antitodo-container">
                <h2>‚ú® Ich hab was geschafft!</h2>
                <p class="antitodo-subtitle">W√ºrdige deine unsichtbaren Erfolge</p>
                
                <!-- Haupt-Button -->
                <div class="achievement-center">
                    <button class="big-achievement-btn" onclick="openAchievementInput()">
                        <span class="achievement-icon">üåü</span>
                        <span class="achievement-text">Ich hab was geschafft!</span>
                    </button>
                </div>
                
                <!-- Input Area (versteckt) -->
                <div class="achievement-input hidden" id="achievementInput">
                    <div class="input-card">
                        <h3>Was hast du geschafft? üí´</h3>
                        <textarea id="achievementText" placeholder="Z.B. Trotz M√ºdigkeit Z√§hne geputzt..." maxlength="200"></textarea>
                        
                        <!-- Quick Suggestions -->
                        <div class="quick-suggestions">
                            <button class="suggestion-chip" onclick="useQuickSuggestion('üí™ Selbstf√ºrsorge trotz Widerstand')">üí™ Selbstf√ºrsorge</button>
                            <button class="suggestion-chip" onclick="useQuickSuggestion('üß† Eine schwere Entscheidung getroffen')">üß† Mental stark</button>
                            <button class="suggestion-chip" onclick="useQuickSuggestion('ü§ù Nein gesagt und Grenze gehalten')">ü§ù Grenzen</button>
                            <button class="suggestion-chip" onclick="useQuickSuggestion('‚ú® ADHS-Chaos akzeptiert statt bek√§mpft')">‚ú® ADHS-real</button>
                            <button class="suggestion-chip" onclick="useQuickSuggestion('üè† Alltag gemeistert trotz wenig Energie')">üè† Alltag</button>
                        </div>
                        
                        <!-- Action Buttons -->
                        <div class="input-actions">
                            <button class="save-achievement" onclick="saveAchievement()">üéâ Feiern!</button>
                            <button class="cancel-input" onclick="cancelInput()">Abbrechen</button>
                        </div>
                    </div>
                </div>
                
                <!-- Heute Liste -->
                <div class="todays-achievements" id="todaysAchievements">
                    <h3>Heute anerkannt üåà</h3>
                    <div class="achievements-list" id="todaysList"></div>
                </div>
                
                <!-- Mut-Archiv -->
                <div class="courage-archive" id="courageArchive">
                    <h3>üìö Mut-Archiv (7 Tage)</h3>
                    <div class="archive-summary" id="archiveSummary"></div>
                    <button class="show-archive-btn" onclick="toggleArchive()">Archiv anzeigen</button>
                    <div class="archive-details hidden" id="archiveDetails"></div>
                </div>
                
                <!-- Settings -->
                <div class="antitodo-settings">
                    <label class="reminder-toggle">
                        <input type="checkbox" id="reminderToggle" onchange="toggleReminder()">
                        <span>Sanfte t√§gliche Erinnerung</span>
                    </label>
                </div>
            </div>
        </div>

    </div> <!-- Ende container -->
        

 
    </div>

    <script>
        let currentEnergy = 8;
        let maxEnergy = 10;
        let dayStarted = false;
        let history = [];
        let currentDay = null;
        let allDays = [];
        let lastAction = null;
        let undoTimeout = null;

        // Angepasste Aktivit√§ten f√ºr Neurodivergenz-Toolkit
const activities = [
    { name: 'Ablehnung verarbeiten', cost: -4, icon: 'üíî' },
    { name: 'Accountability Buddy nutzen', cost: 3, icon: 'ü§ù' },
    { name: 'ND-Content lesen/schauen', cost: 1, icon: 'üìö' },
    { name: 'ND erkl√§ren / √ºber sich reden', cost: -2, icon: 'üó£Ô∏è' },
    { name: 'Anfangen (Initiation)', cost: -2, icon: 'üö¶' },
    { name: 'Arzttermin', cost: -4, icon: 'üè•' },
    { name: 'Aufh√∂ren / stoppen', cost: -2, icon: 'üõë' },
    { name: 'Aufschub √ºberwunden', cost: 3, icon: 'üöÄ' },
    { name: 'Bewusst atmen', cost: 1, icon: 'üå¨Ô∏è' },
    { name: 'Chaos ignoriert (bewusst)', cost: 1, icon: 'üôà' },
    { name: 'Deadline', cost: -5, icon: '‚è∞' },
    { name: 'Dinge finden / suchen', cost: -2, icon: 'üîç' },
    { name: 'Eine Sache bewusst nicht getan', cost: 2, icon: 'üö´' },
    { name: 'E-Mails', cost: -1, icon: 'üìß' },
    { name: 'Entscheidungen treffen', cost: -2, icon: 'ü§î' },
    { name: 'Entscheidungen vermeiden (aufschieben)', cost: -1, icon: 'üôà' },
    { name: 'Entspannung', cost: 4, icon: 'üßò' },
    { name: 'Etwas losgelassen, was ich ‚Äûsollte"', cost: 2, icon: 'ü´ß' },
    { name: 'Etwas nicht zu Ende gebracht', cost: -1, icon: 'üöß' },
    { name: 'Fokusarbeit', cost: -2, icon: 'üíª' },
    { name: 'Geruchsreize (unangenehm)', cost: -1, icon: 'üëÉ' },
    { name: 'Haushalt', cost: -1, icon: 'üè†' },
    { name: 'Hintergrundger√§usche (viele)', cost: -2, icon: 'üîâ' },
    { name: 'Hyperfokus (Arbeit)', cost: 2, icon: 'üöÄ' },
    { name: 'Hyperfokus (privat, moderat)', cost: 4, icon: '‚ú®' },
    { name: 'Hyperfokus (privat, intensiv)', cost: -3, icon: '‚ú®' },
    { name: 'Klarheit / Aha-Moment', cost: 2, icon: 'üí°' },
    { name: 'Kleinkram erledigt (Mini-To-Dos)', cost: -2, icon: 'üßæ' },
    { name: 'Kochen (einfach)', cost: 1, icon: 'üç≥' },
    { name: 'Kochen (komplex)', cost: -2, icon: 'üë®‚Äçüç≥' },
    { name: 'Konflikt', cost: -4, icon: '‚ö°' },
    { name: 'Kontakt gesucht (kurz)', cost: 2, icon: 'üì®' },
    { name: 'Kreative T√§tigkeit', cost: 3, icon: 'üé®' },
    { name: 'Kritik verarbeiten', cost: -3, icon: '‚öñÔ∏è' },
    { name: 'Kurzes spontanes Tanzen', cost: 3, icon: 'üíÉ' },
    { name: 'Lichtreize (hell, grell, flackernd)', cost: -2, icon: 'üí°' },
    { name: 'Masking / sich ‚Äûanpassen"', cost: -4, icon: 'üé≠' },
    { name: 'Meeting', cost: -4, icon: 'üë•' },
    { name: 'Mich an etwas Sch√∂nes erinnert', cost: 2, icon: 'üì∏' },
    { name: 'Mir verziehen, dass ich Pause gemacht habe', cost: 3, icon: 'üß°' },
    { name: 'Mich nicht verglichen', cost: 2, icon: 'üö´' },
    { name: 'Mit jemandem gelacht', cost: 3, icon: 'üòÇ' },
    { name: 'Multitasking / Kontexte wechseln', cost: -2, icon: 'üîÄ' },
    { name: 'Musik h√∂ren', cost: 3, icon: 'üéµ' },
    { name: 'Nach Hilfe gefragt', cost: 3, icon: 'üôã' },
    { name: 'Nichts geschafft (trotz M√ºhe)', cost: -4, icon: 'üå´Ô∏è' },
    { name: 'Ordnung schaffen', cost: -2, icon: 'üßπ' },
    { name: 'Organisation', cost: -2, icon: 'üìÅ' },
    { name: 'Overthinking / Ruminieren', cost: -2, icon: 'üîÑ' },
    { name: 'Papierkram', cost: -4, icon: 'üìÑ' },
    { name: 'Pause', cost: 2, icon: '‚òï' },
    { name: 'Plan√§nderung', cost: -3, icon: 'üîÑ' },
    { name: 'Power-Nap', cost: 2, icon: 'üò¥' },
    { name: 'Priorisieren', cost: -1, icon: 'üìä' },
    { name: 'Rechnungen zahlen / Fristen beachten', cost: -3, icon: 'üí∏' },
    { name: 'Routine√§nderung', cost: -4, icon: 'üîÄ' },
    { name: 'Routineaufgaben', cost: -3, icon: 'üìã' },
    { name: 'Sache angefangen, ohne sie fertig zu m√ºssen', cost: 1, icon: 'üß∂' },
    { name: 'Scroll-Falle / Dopamin-Dump', cost: -3, icon: 'üì±' },
    { name: 'Selbstkritik / Shame Spiral', cost: -4, icon: 'üï≥Ô∏è' },
    { name: 'Selbstmitgef√ºhl √ºben', cost: 2, icon: 'üíñ' },
    { name: 'Selbststimulierung bewusst nutzen', cost: 2, icon: 'üéõÔ∏è' },
    { name: 'Small Talk', cost: -5, icon: 'üí¨' },
    { name: 'Soziales Tiefgespr√§ch', cost: -2, icon: 'üó®Ô∏è' },
    { name: 'Soziale Interaktion (Arbeit)', cost: -6, icon: 'üó£Ô∏è' },
    { name: 'Soziale Interaktion (Privat)', cost: -1, icon: '‚òï' },
    { name: 'Spaziergang', cost: 3, icon: 'üö∂' },
    { name: 'Special Interest Zeit', cost: 5, icon: '‚≠ê' },
    { name: 'Spoons bewusst eingesetzt', cost: 2, icon: 'ü•Ñ' },
    { name: 'Spontane Anfrage/Unterbrechung', cost: -3, icon: '‚ùó' },
    { name: 'Sport (anstrengend)', cost: -1, icon: 'üí™' },
    { name: 'Sport (leicht)', cost: 3, icon: 'üßò‚Äç‚ôÄÔ∏è' },
    { name: 'Stretching / Dehnen', cost: 2, icon: 'ü§∏' },
    { name: 'Tagtr√§umen (geplant)', cost: 2, icon: '‚òÅÔ∏è' },
    { name: 'Telefonieren', cost: -3, icon: 'üìû' },
    { name: 'To-Do-Liste erstellt', cost: 1, icon: 'üìù' },
    { name: '√úberlappende Gespr√§che', cost: -3, icon: 'üó£Ô∏è' },
    { name: 'Unterbrechung', cost: -3, icon: 'üö´' },
    { name: 'Warten / Leerlauf', cost: -3, icon: '‚è≥' },
    { name: 'Zeit mit Tieren', cost: 3, icon: 'üêæ' },
    { name: 'Zweisamkeit ohne reden', cost: 2, icon: 'ü§ù' }
];

        // Slider functionality
        const slider = document.getElementById('morningSlider');
        const sliderValue = document.getElementById('sliderValue');
        
        slider.addEventListener('input', function() {
            sliderValue.textContent = `${this.value} L√∂ffel`;
        });

        function startDay() {
            maxEnergy = parseInt(slider.value);
            currentEnergy = maxEnergy;
            dayStarted = true;
            history = [];
            
            // Create new day record
            currentDay = {
                date: new Date().toISOString().split('T')[0],
                dayOfWeek: new Date().getDay(),
                startEnergy: maxEnergy,
                endEnergy: currentEnergy,
                activities: []
            };
            
            document.getElementById('morningCheckin').classList.add('hidden');
            document.getElementById('mainDisplay').classList.remove('hidden');
            document.getElementById('activitiesGrid').classList.remove('hidden');
            document.getElementById('history').classList.remove('hidden');
            document.getElementById('resetBtn').classList.remove('hidden');
            document.getElementById('navigation').classList.remove('hidden');
            
            updateDisplay();
            renderActivities();
            saveToLocalStorage();
        }

        function updateDisplay() {
            const spoonsContainer = document.getElementById('spoonsContainer');
            const energyNumber = document.getElementById('energyNumber');
            const energyStatus = document.getElementById('energyStatus');
            
            // Clear and update spoons
            spoonsContainer.innerHTML = '';
            for (let i = 0; i < maxEnergy; i++) {
                const spoon = document.createElement('span');
                spoon.className = 'spoon';
                spoon.textContent = 'ü•Ñ';
                if (i >= currentEnergy) {
                    spoon.classList.add('empty');
                } else {
                    spoon.classList.add('full');
                }
                spoonsContainer.appendChild(spoon);
            }
            
            // Update number
            energyNumber.textContent = `${currentEnergy} / ${maxEnergy}`;
            
            // Update status
            energyStatus.classList.remove('status-good', 'status-warning', 'status-critical');
            if (currentEnergy <= 2) {
                energyStatus.classList.add('status-critical');
                energyStatus.textContent = '‚ö†Ô∏è Kritisch! Zeit f√ºr eine Pause!';
            } else if (currentEnergy <= 4) {
                energyStatus.classList.add('status-warning');
                energyStatus.textContent = '‚ö° Vorsicht - Energie wird knapp!';
            } else {
                energyStatus.classList.add('status-good');
                energyStatus.textContent = '‚úÖ Alles im gr√ºnen Bereich!';
            }
            
            // Update current day end energy
            if (currentDay) {
                currentDay.endEnergy = currentEnergy;
            }
        }

        function renderActivities() {
    const grid = document.getElementById('activitiesGrid');
    grid.innerHTML = '';
    
    // NEUE ADHS-OPTIMIERUNG: Nur passende Aktivit√§ten zeigen
    const relevantActivities = getRelevantActivities();
    
    relevantActivities.forEach(activity => {
        const btn = document.createElement('button');
        btn.className = 'activity-btn';
        
        // Color coding based on energy cost
        if (activity.cost > 0) {
            btn.classList.add('energy-gain');
        } else if (activity.cost >= -2) {
            btn.classList.add('energy-drain-low');
        } else if (activity.cost >= -4) {
            btn.classList.add('energy-drain-medium');
        } else {
            btn.classList.add('energy-drain-high');
        }
        
        btn.innerHTML = `
            <span style="font-size: 30px">${activity.icon}</span>
            <span>${activity.name}</span>
            <span class="energy-cost">${activity.cost > 0 ? '+' : ''}${activity.cost} ü•Ñ</span>
        `;
        
        btn.onclick = () => doActivity(activity);
        grid.appendChild(btn);
    });
    
    // Button um alle Aktivit√§ten zu zeigen
    const showAllBtn = document.createElement('button');
    showAllBtn.className = 'activity-btn';
    showAllBtn.style.cssText = 'background: #7f8c8d; opacity: 0.8;';
    showAllBtn.innerHTML = `
        <span style="font-size: 20px">üìã</span>
        <span>Alle anzeigen</span>
        <span style="font-size: 12px">${activities.length} Aktivit√§ten</span>
    `;
    showAllBtn.onclick = () => showAllActivities();
    grid.appendChild(showAllBtn);
}

// NEUE FUNKTION: Relevante Aktivit√§ten ausw√§hlen
function getRelevantActivities() {
    const currentHour = new Date().getHours();
    let filtered = [];
    
    // Bei sehr wenig Energie: Nur Notfall-Aktivit√§ten
    if (currentEnergy <= 2) {
        filtered = activities.filter(a => 
            a.cost > 0 || // Energie-gewinnend
            a.name.includes('Pause') ||
            a.name.includes('atmen') ||
            a.name.includes('Entspannung') ||
            a.name.includes('Wasser') ||
            a.name.includes('Power-Nap')
        ).slice(0, 4);
        
        // Notfall-Option hinzuf√ºgen
        filtered.push({ 
            name: 'Einfach nichts tun', 
            cost: 0, 
            icon: 'ü§ç' 
        });
        
        return filtered;
    }
    
    // Morgens (6-12): Energie-aufbauende Aktivit√§ten
    if (currentHour >= 6 && currentHour < 12) {
        filtered = activities.filter(a => 
            a.cost > 0 || // Positive Energie
            a.cost >= -1 || // Leichte Aktivit√§ten
            a.name.includes('Musik') ||
            a.name.includes('Spaziergang') ||
            a.name.includes('Sport (leicht)')
        ).slice(0, 6);
    }
    // Mittags (12-17): Produktive aber machbare Sachen
    else if (currentHour >= 12 && currentHour < 17) {
        filtered = activities.filter(a => 
            a.cost >= -3 && // Nicht zu anstrengend
            !a.name.includes('Socializing (Arbeit)') // Keine schweren sozialen Sachen
        ).slice(0, 6);
    }
    // Abends (17-22): Entspannung und Abschalten
    else if (currentHour >= 17 && currentHour < 22) {
        filtered = activities.filter(a => 
            a.cost > 0 || // Energie-aufbauend
            a.name.includes('Entspannung') ||
            a.name.includes('Musik') ||
            a.name.includes('Zweisamkeit') ||
            a.name.includes('Tiere')
        ).slice(0, 6);
    }
    // Nachts: Nur Ruhe-Aktivit√§ten
    else {
        filtered = activities.filter(a => 
            a.cost > 0 ||
            a.name.includes('Entspannung') ||
            a.name.includes('Power-Nap') ||
            a.name.includes('atmen')
        ).slice(0, 4);
    }
    
    return filtered.length > 0 ? filtered : activities.slice(0, 6);
}

// NEUE FUNKTION: Alle Aktivit√§ten anzeigen
function showAllActivities() {
    const grid = document.getElementById('activitiesGrid');
    grid.innerHTML = '';
    
    // Zur√ºck-Button
    const backBtn = document.createElement('button');
    backBtn.className = 'activity-btn';
    backBtn.style.cssText = 'background: #3498db;';
    backBtn.innerHTML = `
        <span style="font-size: 20px">‚Üê</span>
        <span>Zur√ºck zu Empfehlungen</span>
    `;
    backBtn.onclick = () => renderActivities();
    grid.appendChild(backBtn);
    
    // Alle Aktivit√§ten anzeigen (original Code)
    activities.forEach(activity => {
        const btn = document.createElement('button');
        btn.className = 'activity-btn';
        
        if (activity.cost > 0) {
            btn.classList.add('energy-gain');
        } else if (activity.cost >= -2) {
            btn.classList.add('energy-drain-low');
        } else if (activity.cost >= -4) {
            btn.classList.add('energy-drain-medium');
        } else {
            btn.classList.add('energy-drain-high');
        }
        
        btn.innerHTML = `
            <span style="font-size: 30px">${activity.icon}</span>
            <span>${activity.name}</span>
            <span class="energy-cost">${activity.cost > 0 ? '+' : ''}${activity.cost} ü•Ñ</span>
        `;
        
        btn.onclick = () => doActivity(activity);
        grid.appendChild(btn);
    });
}


        function doActivity(activity) {
            const previousEnergy = currentEnergy;
            const newEnergy = currentEnergy + activity.cost;
            
            // Don't go below 0 or above max
            currentEnergy = Math.max(0, Math.min(maxEnergy, newEnergy));
            
            // Add to history
            const time = new Date().toLocaleTimeString('de-DE', { hour: '2-digit', minute: '2-digit' });
            const activityRecord = {
                time: time,
                activity: activity.name,
                cost: activity.cost,
                icon: activity.icon
            };
            
            history.unshift(activityRecord);
            
            // Add to current day
            if (currentDay) {
                currentDay.activities.push(activityRecord);
            }
            
            // Store last action for undo
            lastAction = {
                activity: activityRecord,
                previousEnergy: previousEnergy
            };
            
            // Show undo button
            showUndoButton();
            
            updateDisplay();
            updateHistory();
            saveToLocalStorage();
            
            // Alert if energy is critical
            if (currentEnergy <= 2 && activity.cost < 0) {
                setTimeout(() => {
                    if (confirm('‚ö†Ô∏è Deine Energie ist kritisch niedrig! Zeit f√ºr eine Pause?')) {
                        // Auto-suggest energy-giving activities
                        const restActivities = activities.filter(a => a.cost > 0);
                        if (restActivities.length > 0) {
                            alert(`Probier doch: ${restActivities.map(a => a.name).join(', ')}`);
                        }
                    }
                }, 100);
            }
        }

        function showUndoButton() {
            // Clear existing timeout
            if (undoTimeout) {
                clearTimeout(undoTimeout);
            }
            
            const undoContainer = document.getElementById('undoContainer');
            undoContainer.innerHTML = '<button class="undo-btn" onclick="undoLastAction()">‚Ü©Ô∏è R√ºckg√§ngig</button>';
            
            // Remove button after 5 seconds
            undoTimeout = setTimeout(() => {
                undoContainer.innerHTML = '';
                lastAction = null;
            }, 5000);
        }

        function undoLastAction() {
            if (!lastAction) return;
            
            // Restore previous energy
            currentEnergy = lastAction.previousEnergy;
            
            // Remove from history
            history.shift();
            
            // Remove from current day
            if (currentDay && currentDay.activities.length > 0) {
                currentDay.activities.pop();
            }
            
            // Clear undo button
            document.getElementById('undoContainer').innerHTML = '';
            clearTimeout(undoTimeout);
            lastAction = null;
            
            // Update displays
            updateDisplay();
            updateHistory();
            saveToLocalStorage();
        }

        function updateHistory() {
            const historyList = document.getElementById('historyList');
            historyList.innerHTML = '';
            
            history.slice(0, 10).forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'history-item';
                div.innerHTML = `
                    <div class="history-item-content">
                        <span>${item.icon} ${item.time} - ${item.activity}</span>
                    </div>
                    <div class="history-item-actions">
                        <span style="color: ${item.cost > 0 ? '#27ae60' : '#e74c3c'}">
                            ${item.cost > 0 ? '+' : ''}${item.cost} ü•Ñ
                        </span>
                        <button class="delete-btn" onclick="deleteActivity(${index})" title="L√∂schen">‚ùå</button>
                    </div>
                `;
                historyList.appendChild(div);
            });
        }

        function deleteActivity(index) {
            if (!confirm('Diese Aktivit√§t wirklich l√∂schen?')) return;
            
            // Get the activity to delete
            const deletedActivity = history[index];
            
            // Reverse the energy change
            currentEnergy = Math.max(0, Math.min(maxEnergy, currentEnergy - deletedActivity.cost));
            
            // Remove from history
            history.splice(index, 1);
            
            // Remove from current day's activities
            if (currentDay && currentDay.activities.length > 0) {
                // Find and remove the activity from the day's records
                const actIndex = currentDay.activities.findIndex(act => 
                    act.time === deletedActivity.time && 
                    act.activity === deletedActivity.activity
                );
                if (actIndex !== -1) {
                    currentDay.activities.splice(actIndex, 1);
                }
            }
            
            // Update displays
            updateDisplay();
            updateHistory();
            saveToLocalStorage();
        }

        function resetDay() {
            if (confirm('M√∂chtest du den Tag abschlie√üen und einen neuen starten?')) {
                // Save current day
                if (currentDay && currentDay.activities.length > 0) {
                    allDays.push(currentDay);
                    updateStatistics();
                }
                
                // Reset for new day
                currentDay = null;
                dayStarted = false;
                history = [];
                updateHistory();
                document.getElementById('morningCheckin').classList.remove('hidden');
                document.getElementById('mainDisplay').classList.add('hidden');
                document.getElementById('activitiesGrid').classList.add('hidden');
                document.getElementById('history').classList.add('hidden');
                document.getElementById('resetBtn').classList.add('hidden');
            }
            saveToLocalStorage();
        }
  
  // Update showPage function to handle motivator
function showPage(page) {
    // Update navigation
    document.querySelectorAll('.nav-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    event.target.classList.add('active');
    
    // Show correct page
    document.querySelectorAll('.page').forEach(p => {
        p.classList.remove('active');
    });
    
    if (page === 'tracker') {
        document.getElementById('trackerPage').classList.add('active');
        if (dayStarted) {
            updateHistory();
        }
    } else if (page === 'stats') {
        document.getElementById('statsPage').classList.add('active');
        updateStatistics();
    } else if (page === 'motivator') {
        document.getElementById('motivatorPage').classList.add('active');
        loadMotivaorData();
        updateFavoritesDisplay();
        // Reset to mood selection if coming from other pages
        backToMoods();
    } else if (page === 'antitodo') {
    document.getElementById('antitodoPage').classList.add('active');
    loadAntitodoData();
    updateTodaysAchievements();
    updateCourageArchive();
    // Reset input state
    cancelInput();
 }
}


        function updateStatistics() {
            addBackupStatusToStats();
            // Total days
            document.getElementById('totalDays').textContent = allDays.length;
            
            if (allDays.length === 0) {
                document.getElementById('avgStart').textContent = '-';
                document.getElementById('avgEnd').textContent = '-';
                document.getElementById('insightsList').innerHTML = '<div class="insight-item">Noch keine Daten vorhanden. Tracke ein paar Tage, um Einblicke zu erhalten!</div>';
                document.getElementById('topDrains').innerHTML = '<p>Noch keine Daten</p>';
                document.getElementById('topGains').innerHTML = '<p>Noch keine Daten</p>';
                return;
            }
            
            // Average start and end energy
            const avgStart = allDays.reduce((sum, day) => sum + day.startEnergy, 0) / allDays.length;
            const avgEnd = allDays.reduce((sum, day) => sum + day.endEnergy, 0) / allDays.length;
            
            document.getElementById('avgStart').textContent = avgStart.toFixed(1);
            document.getElementById('avgEnd').textContent = avgEnd.toFixed(1);
            
            // Activity analysis
            const activityStats = {};
            allDays.forEach(day => {
                day.activities.forEach(act => {
                    if (!activityStats[act.activity]) {
                        activityStats[act.activity] = { count: 0, totalCost: 0, icon: act.icon };
                    }
                    activityStats[act.activity].count++;
                    activityStats[act.activity].totalCost += act.cost;
                });
            });
            
            // Top drains and gains
            const drains = Object.entries(activityStats)
                .filter(([_, stats]) => stats.totalCost < 0)
                .sort((a, b) => a[1].totalCost - b[1].totalCost)
                .slice(0, 5);
                
            const gains = Object.entries(activityStats)
                .filter(([_, stats]) => stats.totalCost > 0)
                .sort((a, b) => b[1].totalCost - a[1].totalCost)
                .slice(0, 5);
            
            document.getElementById('topDrains').innerHTML = drains
                .map(([name, stats]) => 
                    `<p><span>${stats.icon} ${name}</span><span>${stats.totalCost} ü•Ñ (${stats.count}x)</span></p>`
                ).join('');
                
            document.getElementById('topGains').innerHTML = gains
                .map(([name, stats]) => 
                    `<p><span>${stats.icon} ${name}</span><span>+${stats.totalCost} ü•Ñ (${stats.count}x)</span></p>`
                ).join('');
            
            // Generate insights
            const insights = [];
            
            // Energy difference insight
            const energyDiff = avgEnd - avgStart;
            if (energyDiff < -2) {
                insights.push('üí° Du verbrauchst im Schnitt mehr Energie als du regenerierst. Plane mehr Erholungsphasen ein!');
            } else if (energyDiff > 1) {
                insights.push('üåü Super! Du schaffst es, deine Energie gut zu managen und endest meist mit mehr L√∂ffeln als erwartet.');
            } else {
                insights.push('‚öñÔ∏è Deine Energiebilanz ist ausgeglichen. Das ist ein gutes Zeichen!');
            }
            
            // Most used activity
            const mostUsed = Object.entries(activityStats)
                .sort((a, b) => b[1].count - a[1].count)[0];
            if (mostUsed) {
                insights.push(`üîÑ "${mostUsed[0]}" machst du am h√§ufigsten (${mostUsed[1].count}x)`);
            }
            
            // Days tracked insight
            if (allDays.length >= 7) {
                insights.push('üìä Mit ' + allDays.length + ' getrackten Tagen hast du genug Daten f√ºr aussagekr√§ftige Muster!');
            }
            
            document.getElementById('insightsList').innerHTML = insights
                .map(insight => `<div class="insight-item">${insight}</div>`)
                .join('');
        }

        function exportData() {
            const exportObj = {
                version: '1.0',
                exportDate: new Date().toISOString(),
                allDays: allDays,
                currentDay: currentDay
            };
            
            const dataStr = JSON.stringify(exportObj, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `energie-tracker-${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            localStorage.setItem('lastBackupDate', new Date().toISOString());
        }

        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const importObj = JSON.parse(e.target.result);
                    
                    if (importObj.version !== '1.0') {
                        alert('Inkompatible Dateiversion');
                        return;
                    }
                    
                    if (confirm('M√∂chtest du die importierten Daten zu deinen bestehenden Daten hinzuf√ºgen?')) {
                        allDays = allDays.concat(importObj.allDays || []);
                        updateStatistics();
                        saveToLocalStorage();
                        alert('Daten erfolgreich importiert!');
                    }
                } catch (error) {
                    alert('Fehler beim Importieren der Datei');
                }
            };
            reader.readAsText(file);
        }

        // Initialize
window.onload = function() {
    // Try to load saved data
    loadFromLocalStorage();
    checkBackupReminder();
    loadMotivaorData();
    
    // If we have a saved state, restore it
    if (dayStarted) {
        document.getElementById('morningCheckin').classList.add('hidden');
        document.getElementById('mainDisplay').classList.remove('hidden');
        document.getElementById('activitiesGrid').classList.remove('hidden');
        document.getElementById('history').classList.remove('hidden');
        document.getElementById('resetBtn').classList.remove('hidden');
        document.getElementById('navigation').classList.remove('hidden');
        
        updateDisplay();
        renderActivities();
        updateHistory();
    }
    
    loadAntitodoData();
    checkDailyReminder(); // Check for daily reminder
    
    // Set up daily reminder check (every hour)
    setInterval(checkDailyReminder, 60 * 60 * 1000);
};

// Save to localStorage whenever data changes
function saveToLocalStorage() {
    try {
        const dataToSave = {
            currentEnergy: currentEnergy,
            maxEnergy: maxEnergy,
            dayStarted: dayStarted,
            history: history,
            currentDay: currentDay,
            allDays: allDays,
            lastSaved: new Date().toISOString()
        };
        localStorage.setItem('energieTracker', JSON.stringify(dataToSave));
        console.log('Daten automatisch gespeichert');
    } catch (e) {
        console.log('LocalStorage nicht verf√ºgbar - nutze Export-Funktion');
    }
}

// Load from localStorage
function loadFromLocalStorage() {
    try {
        const saved = localStorage.getItem('energieTracker');
        if (saved) {
            const data = JSON.parse(saved);
            currentEnergy = data.currentEnergy || 8;
            maxEnergy = data.maxEnergy || 10;
            dayStarted = data.dayStarted || false;
            history = data.history || [];
            currentDay = data.currentDay || null;
            allDays = data.allDays || [];
            
            console.log('Daten wiederhergestellt vom:', new Date(data.lastSaved).toLocaleString('de-DE'));
        }
    } catch (e) {
        console.log('Keine gespeicherten Daten gefunden oder LocalStorage nicht verf√ºgbar');
    }
}


// Backup-Reminder System f√ºr deinen ADHS Energie-Tracker
// Einfach diesen Code in dein bestehendes JavaScript einf√ºgen

// Backup-Reminder Funktionen
function checkBackupReminder() {
    try {
        const lastBackup = localStorage.getItem('lastBackupDate');
        const now = new Date();
        
        if (!lastBackup) {
            // Noch nie ein Backup gemacht - nach 7 Tagen erinnern
            const firstUse = localStorage.getItem('firstUseDate');
            if (!firstUse) {
                localStorage.setItem('firstUseDate', now.toISOString());
                return;
            }
            
            const daysSinceFirstUse = Math.floor((now - new Date(firstUse)) / (1000 * 60 * 60 * 24));
            if (daysSinceFirstUse >= 0) {
                showBackupReminder(true); // true = erstes Backup
            }
        } else {
            // Backup vorhanden - alle 14 Tage erinnern
            const daysSinceBackup = Math.floor((now - new Date(lastBackup)) / (1000 * 60 * 60 * 24));
            if (daysSinceBackup >= 14) {
                showBackupReminder(false); // false = regul√§res Backup
            }
        }
    } catch (e) {
        console.log('Backup-Reminder nicht verf√ºgbar');
    }
}

function showBackupReminder(isFirst) {
    // Erstelle Reminder-Element wenn es noch nicht existiert
    let reminder = document.getElementById('backupReminder');
    if (!reminder) {
        reminder = document.createElement('div');
        reminder.id = 'backupReminder';
        reminder.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: #f39c12;
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            z-index: 1000;
            max-width: 300px;
            font-size: 14px;
            animation: slideIn 0.3s ease;
        `;
        
        // Animation hinzuf√ºgen
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
        `;
        document.head.appendChild(style);
        
        document.body.appendChild(reminder);
    }
    
    const message = isFirst 
        ? 'üíæ <strong>Tipp:</strong> Du nutzt den Tracker schon eine Woche! Zeit f√ºr dein erstes Backup deiner wertvollen Daten.'
        : 'üíæ <strong>Backup-Erinnerung:</strong> Dein letztes Backup ist schon 2+ Wochen her.';
    
    reminder.innerHTML = `
        ${message}
        <div style="margin-top: 10px; display: flex; gap: 10px; justify-content: flex-end;">
            <button onclick="doBackupFromReminder()" style="
                background: white; 
                color: #f39c12; 
                border: none; 
                padding: 5px 10px; 
                border-radius: 5px; 
                cursor: pointer;
                font-size: 12px;
                font-weight: bold;
            ">Backup erstellen</button>
            <button onclick="dismissBackupReminder()" style="
                background: transparent; 
                color: white; 
                border: 1px solid white; 
                padding: 5px 10px; 
                border-radius: 5px; 
                cursor: pointer;
                font-size: 12px;
            ">Sp√§ter</button>
        </div>
    `;
}

function doBackupFromReminder() {
    // Backup erstellen
    exportData();
    
    // Backup-Datum speichern
    localStorage.setItem('lastBackupDate', new Date().toISOString());
    
    // Reminder entfernen
    dismissBackupReminder();
    
    // Kurze Best√§tigung zeigen
    showBackupConfirmation();
}

function dismissBackupReminder() {
    const reminder = document.getElementById('backupReminder');
    if (reminder) {
        reminder.style.animation = 'slideOut 0.3s ease forwards';
        setTimeout(() => reminder.remove(), 300);
    }
}

function showBackupConfirmation() {
    const confirmation = document.createElement('div');
    confirmation.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: #27ae60;
        color: white;
        padding: 15px 20px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        z-index: 1000;
        font-size: 14px;
        animation: slideIn 0.3s ease;
    `;
    
    confirmation.innerHTML = '‚úÖ <strong>Backup erfolgreich!</strong><br>Deine Daten sind sicher gespeichert.';
    document.body.appendChild(confirmation);
    
    // Nach 3 Sekunden wieder entfernen
    setTimeout(() => {
        confirmation.style.animation = 'slideOut 0.3s ease forwards';
        setTimeout(() => confirmation.remove(), 300);
    }, 3000);
}

function getLastBackupInfo() {
    try {
        const lastBackup = localStorage.getItem('lastBackupDate');
        if (!lastBackup) return 'Noch nie';
        
        const daysSince = Math.floor((new Date() - new Date(lastBackup)) / (1000 * 60 * 60 * 24));
        if (daysSince === 0) return 'Heute';
        if (daysSince === 1) return 'Gestern';
        return `vor ${daysSince} Tagen`;
    } catch (e) {
        return 'Unbekannt';
    }
}

// Backup-Status in der App anzeigen
function addBackupStatusToStats() {
    // Backup-Info zu den Statistiken hinzuf√ºgen
    const statsContainer = document.querySelector('.stats-grid');
    if (statsContainer) {
        const backupCard = document.createElement('div');
        backupCard.className = 'stat-card';
        backupCard.innerHTML = `
            <h3>Letztes Backup</h3>
            <div class="stat-value" style="font-size: 16px; color: #f39c12;" id="lastBackupStatus">${getLastBackupInfo()}</div>
            <button onclick="doBackupFromReminder()" style="
                margin-top: 10px;
                background: #27ae60;
                border: none;
                color: white;
                padding: 8px 16px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
            ">Backup erstellen</button>
        `;
        statsContainer.appendChild(backupCard);
    }
}

// CSS f√ºr slideOut Animation hinzuf√ºgen
const slideOutStyle = document.createElement('style');
slideOutStyle.textContent = `
    @keyframes slideOut {
        from { transform: translateX(0); opacity: 1; }
        to { transform: translateX(100%); opacity: 0; }
    }
`;
document.head.appendChild(slideOutStyle);

// INTEGRATION IN DEINE BESTEHENDE APP:

// 1. In window.onload hinzuf√ºgen:
// checkBackupReminder();

// 2. In updateStatistics() hinzuf√ºgen:
// addBackupStatusToStats();

// 3. In exportData() am Ende hinzuf√ºgen:
// localStorage.setItem('lastBackupDate', new Date().toISOString());
// Mini-Motivator Data
let currentMood = null;
let currentSuggestion = null;
let motivatorData = {
    favorites: [],
    feedback: {},
    usageStats: {}
};

const suggestions = {
    √ºberfordert: [
        { text: "Schreib 3 Dinge auf, die heute wichtig sind. W√§hl dann nur 1 davon aus.", type: "mental", icon: "üìù" },
        { text: "Stell dir einen Timer auf 5 Minuten und r√§ume nur deinen Schreibtisch auf.", type: "k√∂rperlich", icon: "‚è∞" },
        { text: "Atme 4 Sekunden ein, 6 Sekunden aus. Wiederhole das 3x.", type: "sensorisch", icon: "üå¨Ô∏è" },
        { text: "Sag dir: 'Ich darf klein anfangen.' Und tu nur 1 % davon.", type: "mental", icon: "üß©" },
        { text: "Mach kurz einen lauten Ton (z.‚ÄØB. klatschen) ‚Äì als Cut.", type: "sensorisch", icon: "üëè" },
        { text: "Such dir ein Symbol in deiner Umgebung, das f√ºr Ruhe steht.", type: "sensorisch", icon: "ü™∑" },
        { text: "Denk an jemanden, der dir raten w√ºrde: 'Mach nur das N√∂tigste.'", type: "mental", icon: "üßì" },
        { text: "Sag dir: 'Heute reicht ein Schritt. Der n√§chste kommt sp√§ter.'", type: "mental", icon: "üö∂‚Äç‚ôÄÔ∏è" },
        { text: "Nimm dir 60 Sekunden und streiche gedanklich alles, was nicht heute sein muss.", type: "mental", icon: "üóëÔ∏è" },
        { text: "Sortiere visuell 3 Gegenst√§nde auf deinem Tisch neu. Nur das.", type: "k√∂rperlich", icon: "üì¶" }
    ],
    lethargisch: [
        { text: "Steh auf und mach 5 Hampelm√§nner oder strecke dich ausgiebig.", type: "k√∂rperlich", icon: "ü§∏" },
        { text: "Spiel deinen absoluten Lieblingssong und lass dich davon mitrei√üen.", type: "sensorisch", icon: "üéµ" },
        { text: "Sag laut zu dir: 'Ich fange jetzt mit dem kleinsten Schritt an.'", type: "mental", icon: "üí¨" },
        { text: "Roll mit den Schultern vor und zur√ºck ‚Äì 3x bewusst.", type: "k√∂rperlich", icon: "üßç‚Äç‚ôÄÔ∏è" },
        { text: "Geh ans Waschbecken und bespritze dein Gesicht mit kaltem Wasser.", type: "sensorisch", icon: "üí¶" },
        { text: "Geh kurz barfu√ü (drinnen oder drau√üen).", type: "k√∂rperlich", icon: "ü¶∂" },
        { text: "L√§chele dich 5 Sekunden im Spiegel an ‚Äì auch wenn‚Äôs sich seltsam anf√ºhlt.", type: "mental", icon: "üôÇ" },
        { text: "Schreib mit einem Stift einfach deinen Namen ‚Äì 3x. Komm ins Tun.", type: "k√∂rperlich", icon: "‚úèÔ∏è" },
        { text: "Fl√ºster: 'Ich kann klein anfangen.' Wiederhole es leise 3x.", type: "mental", icon: "üîÅ" },
        { text: "Tipp 10 Sekunden rhythmisch mit den Fingern auf den Tisch.", type: "sensorisch", icon: "ü™µ" }
    ],
    verknotet: [
        { text: "Nimm einen Stift und schreibe 2 Minuten alles auf, was dir durch den Kopf geht.", type: "mental", icon: "üß†" },
        { text: "Leg dich 30 Sekunden flach hin und schau an die Decke. Einfach nur schauen.", type: "k√∂rperlich", icon: "üõèÔ∏è" },
        { text: "Fokussiere dich auf 1 Ger√§usch um dich herum. Nur das eine, 30 Sekunden lang.", type: "sensorisch", icon: "üëÇ" },
        { text: "Sag alles, was du denkst, 1 Minute laut in den Raum.", type: "mental", icon: "üó£Ô∏è" },
        { text: "R√§ume *1 Sache* auf. Nur eine. Egal was.", type: "k√∂rperlich", icon: "üß∫" },
        { text: "Stell dir vor, dein Gehirn ist ein Wollkn√§uel ‚Äì was ist der lose Faden?", type: "mental", icon: "üß∂" },
        { text: "Setz dich an einen anderen Ort im Raum ‚Äì neuer Blickwinkel.", type: "k√∂rperlich", icon: "üîÑ" },
        { text: "Sortiere willk√ºrlich: Was ist Gedanke, was Gef√ºhl, was K√∂rper?", type: "mental", icon: "üìö" },
        { text: "Zeichne Spiralen oder Kringel ‚Äì lass deine Hand das Wirrwarr zeigen.", type: "sensorisch", icon: "üåÄ" },
        { text: "Lies einen Satz laut, der dich fr√ºher beruhigt hat.", type: "mental", icon: "üìñ" }
    ],
    unruhig: [
        { text: "Geh 2 Minuten durch die Wohnung oder um den Block. Einfach gehen.", type: "k√∂rperlich", icon: "üö∂" },
        { text: "Nimm einen Gegenstand in die Hand und betaste ihn bewusst 1 Minute lang.", type: "sensorisch", icon: "‚úã" },
        { text: "Z√§hle r√ºckw√§rts von 20 zu 0 und konzentriere dich nur auf die Zahlen.", type: "mental", icon: "üî¢" },
        { text: "Zappel absichtlich mit Beinen oder H√§nden. Erlaubtes Stimming!", type: "k√∂rperlich", icon: "üåÄ" },
        { text: "Reibe deine Handfl√§chen fest aneinander und leg sie dann aufs Gesicht.", type: "sensorisch", icon: "üëê" },
        { text: "Knet etwas in deinen H√§nden ‚Äì z.‚ÄØB. Stoff, Korken oder Knetmasse.", type: "sensorisch", icon: "üßΩ" },
        { text: "Sprich in Reimen oder Unsinnss√§tzen. Sprach-Stimming erlaubt!", type: "mental", icon: "üóØÔ∏è" },
        { text: "Lauf auf der Stelle ‚Äì so schnell oder langsam, wie du willst.", type: "k√∂rperlich", icon: "üèÉ" },
        { text: "Nimm ein Kissen und dr√ºck es ganz fest an dich.", type: "sensorisch", icon: "üõèÔ∏è" },
        { text: "Mach ein Summger√§usch ‚Äì so tief und lang wie du kannst.", type: "sensorisch", icon: "üéµ" }
    ],
    blockiert: [
        { text: "√ñffne nur die App/das Dokument. Du musst nichts damit machen.", type: "mental", icon: "üì±" },
        { text: "Stell dich vor die Aufgabe und sage: 'Ich schaue mir das nur mal an.'", type: "mental", icon: "üëÄ" },
        { text: "Mach 3 tiefe Atemz√ºge und erinnere dich: Du bist nicht faul.", type: "mental", icon: "üíô" },
        { text: "Schreib: 'Ich bin blockiert, aber...'", type: "mental", icon: "‚úçÔ∏è" },
        { text: "Ber√ºhre bewusst 3 Gegenst√§nde um dich herum.", type: "sensorisch", icon: "üñêÔ∏è" },
        { text: "Schreib den Satz: 'Ich bin blockiert, aber ich bin da.'", type: "mental", icon: "‚úçÔ∏è" },
        { text: "Stell einen Wecker f√ºr 3 Minuten und mach einfach nichts.", type: "sensorisch", icon: "‚è≤Ô∏è" },
        { text: "Leg dir symbolisch den Startknopf bereit: 'Wenn ich bereit bin, dr√ºck ich innerlich drauf.'", type: "mental", icon: "üéõÔ∏è" },
        { text: "Stell dir vor: Du darfst nur beobachten, nicht handeln.", type: "mental", icon: "üîç" },
        { text: "Setz dich einmal um. Wechsel der Perspektive wirkt oft Wunder.", type: "k√∂rperlich", icon: "ü™ë" }
    ],
    √ºberreizt: [
        { text: "Dimme das Licht oder geh in einen ruhigeren Raum.", type: "sensorisch", icon: "üí°" },
        { text: "Leg dich mit einer Decke hin und schlie√üe 2 Minuten die Augen.", type: "k√∂rperlich", icon: "üõãÔ∏è" },
        { text: "Setz Kopfh√∂rer auf und spiele wei√ües Rauschen oder Naturger√§usche ab.", type: "sensorisch", icon: "üéß" },
        { text: "Zieh eine weiche Decke oder Kapuze √ºber dich.", type: "sensorisch", icon: "üß£" },
        { text: "Fl√ºstere langsam: 'Alles darf still sein.'", type: "mental", icon: "ü§´" },
        { text: "Lege etwas √ºber deine Augen ‚Äì Tuch, Kapuze, √Ñrmel.", type: "sensorisch", icon: "ü´£" },
        { text: "Sag: 'Ich bin kein Roboter. Ich darf abschalten.'", type: "mental", icon: "ü§ñ" },
        { text: "Leg dich mit den Beinen hoch, z.‚ÄØB. an die Wand. Lass die Schwerkraft arbeiten.", type: "k√∂rperlich", icon: "ü™ü" },
        { text: "K√ºhle deine Handgelenke unter kaltem Wasser ‚Äì nur 15 Sekunden.", type: "sensorisch", icon: "üßä" },
        { text: "Fl√ºstere einen beruhigenden Satz in deine H√§nde und halte sie ans Ohr.", type: "sensorisch", icon: "ü§≤" }
    ],
    prokrastinierend: [
        { text: "Stelle einen Timer auf 10 Minuten und arbeite nur so lange an der Aufgabe.", type: "mental", icon: "‚è≤Ô∏è" },
        { text: "Schreibe auf: 'Was ist das Schlimmste, was passieren kann?' Meist ist es nicht so wild.", type: "mental", icon: "‚ùì" },
        { text: "Belohne dich schon im Voraus: 'Nach 15 Minuten darf ich...'", type: "mental", icon: "üç™" },
        { text: "Starte mit dem lustigsten oder leichtesten Teil der Aufgabe.", type: "mental", icon: "üòÑ" },
        { text: "Erz√§hl dir selbst in 3 S√§tzen, warum du das eigentlich machen willst.", type: "mental", icon: "üéØ" },
        { text: "Ruf dein Zukunfts-Ich an: 'Hey, was w√ºrdest du tun?'", type: "mental", icon: "üì≤" },
        { text: "Setz dich auf den Boden ‚Äì das √§ndert den Fokus.", type: "k√∂rperlich", icon: "ü™ë" },
        { text: "Starte mit einer 'Anti-To-Do': Schreib, was du **nicht** tun musst.", type: "mental", icon: "üö´" },
        { text: "Mach die Aufgabe absichtlich absurd: Erfind eine alberne Version davon.", type: "mental", icon: "üé≠" },
        { text: "Mach ein 'falsches Anfangen': Tu so, als ob du‚Äôs tust ‚Äì 10 Sekunden.", type: "k√∂rperlich", icon: "üé¨" }
    ],
    hyperfokussiert: [
        { text: "Stell dir einen Alarm f√ºr in 30 Minuten - dann machst du eine kurze Pause.", type: "mental", icon: "‚è∞" },
        { text: "Trink jetzt ein Glas Wasser und iss etwas Kleines.", type: "k√∂rperlich", icon: "üíß" },
        { text: "Notiere dir schnell, wo du gerade stehst, damit du sp√§ter weiterwei√üt.", type: "mental", icon: "üìå" },
        { text: "Steh kurz auf, streck dich, und setz dich wieder hin ‚Äì bewusst.", type: "k√∂rperlich", icon: "ü™ë" },
        { text: "Stell dir vor: Du legst eine virtuelle Lesezeichenkarte hier rein.", type: "mental", icon: "üîñ" },
        { text: "Stell dir einen kleinen digitalen 'Savepoint' vor ‚Äì wie in einem Spiel.", type: "mental", icon: "üíæ" },
        { text: "Greif einen anderen Gegenstand ‚Äì wechsel kurz die Haptik.", type: "sensorisch", icon: "üñêÔ∏è" },
        { text: "Schreib einen 5-Wort-Checkpoint wie in einem Videospiel.", type: "mental", icon: "üß©" },
        { text: "Wechsle die Sitzposition, ohne aufzustehen.", type: "k√∂rperlich", icon: "ü™ë" },
        { text: "Leg einen Gegenstand um, der sonst deine Grenze markiert (z.‚ÄØB. Stift quer vor dir).", type: "sensorisch", icon: "üìè" }
    ],
    verloren: [
        { text: "Frag dich: 'Wie f√ºhlt sich mein K√∂rper gerade an?' und horche 1 Minute in dich hinein.", type: "k√∂rperlich", icon: "ü´Ä" },
        { text: "Schreibe auf: 'Drei Dinge, die heute okay waren.' Auch ganz kleine z√§hlen.", type: "mental", icon: "‚ú®" },
        { text: "Ruf jemanden an oder schreibe jemandem - auch nur 'Hi, wie geht's?'", type: "mental", icon: "üìû" },
        { text: "Such dir 1 Farbe im Raum ‚Äì schau sie 10 Sekunden an.", type: "sensorisch", icon: "üé®" },
        { text: "Forme mit den H√§nden ein Herz oder ein Dreieck. Sp√ºr den Druck.", type: "k√∂rperlich", icon: "ü§≤" },
        { text: "Such 3 Dinge, die du magst ‚Äì Farbe, Form, Geruch.", type: "sensorisch", icon: "üß∫" },
        { text: "Lies einen Satz aus einem Buch oder Postkarte, die dir guttut.", type: "mental", icon: "üìñ" },
        { text: "Sag dir: 'Ich muss gerade nichts wissen.' Lass das Bed√ºrfnis los.", type: "mental", icon: "üéà" },
        { text: "Schau auf deine H√§nde und z√§hle die Linien auf deinen Fingern.", type: "sensorisch", icon: "‚úã" },
        { text: "Such in einem Buch einen Satz mit dem Wort 'und'.", type: "mental", icon: "üìö" }
    ],
    taub: [
        { text: "Halte etwas Warmes in den H√§nden - eine Tasse, ein Heizkissen, einen Pullover.", type: "sensorisch", icon: "‚òï" },
        { text: "Sp√ºre deine F√º√üe auf dem Boden. Bewege die Zehen bewusst.", type: "k√∂rperlich", icon: "ü¶∂" },
        { text: "Sage laut: 'Es ist okay, dass ich gerade nichts f√ºhle. Das geht vorbei.'", type: "mental", icon: "üí≠" },
        { text: "Bewege deine Zunge bewusst im Mundraum ‚Äì sp√ºr, was da ist.", type: "sensorisch", icon: "üëÖ" },
        { text: "Sag: 'Ich darf taub sein. Mein System sch√ºtzt mich gerade.'", type: "mental", icon: "üßò" },
        { text: "Dr√ºck deine H√§nde gegeneinander und sp√ºr die Spannung.", type: "k√∂rperlich", icon: "ü§≤" },
        { text: "Trommle leise mit den Fingern auf deinen Oberschenkeln ‚Äì f√ºhl den Rhythmus.", type: "sensorisch", icon: "ü•Å" },
        { text: "Reibe deine Handinnenfl√§chen sanft √ºber eine raue und eine glatte Oberfl√§che.", type: "sensorisch", icon: "üìé" },
        { text: "Mach 3 Mikrobewegungen: Augenbraue heben, Schulterzucken, Zeh bewegen.", type: "k√∂rperlich", icon: "üéØ" },
        { text: "Stell dir vor, du bist eine Schneekugel ‚Äì in Ruhe rieselt‚Äôs innen weiter.", type: "mental", icon: "üå®Ô∏è" }
    ],
    unbekannt: [
        { text: "Geh 1 Minute ans Fenster und schaue nach drau√üen.", type: "sensorisch", icon: "ü™ü" },
        { text: "Trinke bewusst einen Schluck Wasser und sp√ºre, wie es deinen K√∂rper durchl√§uft.", type: "k√∂rperlich", icon: "üíß" },
        { text: "Atme 3x tief durch und sage dir: 'Ich bin hier. Alles ist okay.'", type: "mental", icon: "üå∏" },
        { text: "Strecke deine Arme √ºber den Kopf und g√§hne absichtlich.", type: "k√∂rperlich", icon: "üôÜ" },
        { text: "Spiele 30 Sekunden lang deine Lieblingsmusik ab.", type: "sensorisch", icon: "üé∂" },
        { text: "Leg deine Hand auf deine Brust. Sp√ºr deinen Herzraum ‚Äì auch wenn nichts da ist.", type: "k√∂rperlich", icon: "ü§ç" },
        { text: "W√§hle eine zuf√§llige Aktion aus der App. Vertrauen √ºben.", type: "mental", icon: "üé≤" },
        { text: "Stell dir vor: Alles darf gerade stillstehen ‚Äì wie ein Schneekugel-Moment.", type: "mental", icon: "üå®Ô∏è" },
        { text: "Geh an einen anderen Ort ‚Äì auch wenn‚Äôs nur der Flur ist.", type: "k√∂rperlich", icon: "üö™" },
        { text: "Sp√ºre deinen Pulsschlag ‚Äì an Hals, Hand oder Brust.", type: "k√∂rperlich", icon: "‚ù§Ô∏è" },
        { text: "Such 1 Ding mit Struktur und streich es mit 2 Fingern ab.", type: "sensorisch", icon: "üßµ" },
        { text: "Schlie√üe die Augen und z√§hle 5 Ger√§usche in deiner Umgebung.", type: "sensorisch", icon: "üëÇ" }
    ]
};

// Mini-Motivator Functions
function selectMood(mood, icon) {
    currentMood = mood;
    
    // Update usage stats
    if (!motivatorData.usageStats[mood]) {
        motivatorData.usageStats[mood] = 0;
    }
    motivatorData.usageStats[mood]++;
    
    // Show suggestion
    getNewSuggestion();
    showSuggestionDisplay();
    
    // Save data
    saveMotivaorData();
}

function getNewSuggestion() {
    if (!currentMood || !suggestions[currentMood]) return;
    
    const moodSuggestions = suggestions[currentMood];
    let newSuggestion;
    
    // Try to avoid repeating the same suggestion immediately
    do {
        newSuggestion = moodSuggestions[Math.floor(Math.random() * moodSuggestions.length)];
    } while (newSuggestion === currentSuggestion && moodSuggestions.length > 1);
    
    currentSuggestion = newSuggestion;
    displaySuggestion();
}

function displaySuggestion() {
    if (!currentSuggestion) return;
    
    const content = document.getElementById('suggestionContent');
    content.innerHTML = `
        <div style="font-size: 40px; margin-bottom: 15px;">${currentSuggestion.icon}</div>
        <div>${currentSuggestion.text}</div>
        <div style="font-size: 14px; color: #95a5a6; margin-top: 15px; opacity: 0.8;">
            ${getTypeLabel(currentSuggestion.type)}
        </div>
    `;
    
    // Reset feedback buttons
    document.querySelectorAll('.feedback-btn').forEach(btn => {
        btn.classList.remove('selected');
    });
}

function getTypeLabel(type) {
    const labels = {
        'k√∂rperlich': 'üßò K√∂rperliche Aktivierung',
        'sensorisch': 'üåà Sensorische Regulation', 
        'mental': 'üß† Mentale Unterst√ºtzung'
    };
    return labels[type] || '';
}

function showSuggestionDisplay() {
    document.getElementById('moodGrid').style.display = 'none';
    document.querySelector('.motivator-subtitle').style.display = 'none';
    document.getElementById('suggestionDisplay').classList.remove('hidden');
}

function backToMoods() {
    document.getElementById('suggestionDisplay').classList.add('hidden');
    document.getElementById('moodGrid').style.display = 'grid';
    document.querySelector('.motivator-subtitle').style.display = 'block';
    currentMood = null;
    currentSuggestion = null;
}

function giveFeedback(isPositive) {
    if (!currentSuggestion || !currentMood) return;
    
    // Visual feedback
    document.querySelectorAll('.feedback-btn').forEach(btn => {
        btn.classList.remove('selected');
    });
    
    const selectedBtn = document.querySelector(`.feedback-btn.${isPositive ? 'good' : 'bad'}`);
    selectedBtn.classList.add('selected');
    
    // Store feedback
    const suggestionKey = `${currentMood}_${currentSuggestion.text.substring(0, 20)}`;
    motivatorData.feedback[suggestionKey] = {
        positive: isPositive,
        timestamp: new Date().toISOString(),
        mood: currentMood,
        suggestion: currentSuggestion
    };
    
    // Add to favorites if positive and not already there
    if (isPositive) {
        const favorite = {
            text: currentSuggestion.text,
            icon: currentSuggestion.icon,
            type: currentSuggestion.type,
            mood: currentMood
        };
        
        const alreadyFavorite = motivatorData.favorites.some(fav => 
            fav.text === favorite.text && fav.mood === favorite.mood
        );
        
        if (!alreadyFavorite) {
            motivatorData.favorites.push(favorite);
            updateFavoritesDisplay();
        }
    }
    
    saveMotivaorData();
    
    // Show brief confirmation
    setTimeout(() => {
        selectedBtn.style.transform = 'scale(1.2)';
        setTimeout(() => {
            selectedBtn.style.transform = 'scale(1.1)';
        }, 200);
    }, 100);
}

function updateFavoritesDisplay() {
    const favoritesSection = document.getElementById('favoritesSection');
    const favoritesList = document.getElementById('favoritesList');
    
    if (motivatorData.favorites.length === 0) {
        favoritesSection.classList.add('hidden');
        return;
    }
    
    favoritesSection.classList.remove('hidden');
    favoritesList.innerHTML = motivatorData.favorites.slice(-5).map(fav => 
        `<button class="favorite-item" onclick="useFavorite('${fav.text}', '${fav.icon}', '${fav.type}')" title="Von: ${fav.mood}">
            ${fav.icon} ${fav.text.substring(0, 30)}${fav.text.length > 30 ? '...' : ''}
        </button>`
    ).join('');
}

function useFavorite(text, icon, type) {
    currentSuggestion = { text, icon, type };
    displaySuggestion();
    showSuggestionDisplay();
}


// Save and load motivator data
function saveMotivaorData() {
    try {
        localStorage.setItem('motivatorData', JSON.stringify(motivatorData));
    } catch (e) {
        console.log('Could not save motivator data');
    }
}

function loadMotivaorData() {
    try {
        const saved = localStorage.getItem('motivatorData');
        if (saved) {
            motivatorData = { ...motivatorData, ...JSON.parse(saved) };
        }
    } catch (e) {
        console.log('Could not load motivator data');
    }
}

// Anti-To-Do Tracker JavaScript
let antitodoData = {
    achievements: [],
    reminderEnabled: false,
    lastReminder: null
};

// Main functions
function openAchievementInput() {
    document.getElementById('achievementInput').classList.remove('hidden');
    document.getElementById('achievementText').focus();
}

function cancelInput() {
    document.getElementById('achievementInput').classList.add('hidden');
    document.getElementById('achievementText').value = '';
}

function useQuickSuggestion(text) {
    document.getElementById('achievementText').value = text;
    document.getElementById('achievementText').focus();
}

function saveAchievement() {
    const text = document.getElementById('achievementText').value.trim();
    if (!text) return;
    
    const achievement = {
        id: Date.now(),
        text: text,
        timestamp: new Date().toISOString(),
        date: new Date().toISOString().split('T')[0]
    };
    
    antitodoData.achievements.unshift(achievement);
    
    // Show celebration
    showCelebration();
    
    // Update displays
    updateTodaysAchievements();
    updateCourageArchive();
    
    // Reset input
    cancelInput();
    
    // Save data
    saveAntitodoData();
}

function showCelebration() {
    // Create celebration overlay
    const celebration = document.createElement('div');
    celebration.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: linear-gradient(135deg, #f39c12, #e67e22);
        color: white;
        padding: 30px;
        border-radius: 20px;
        font-size: 24px;
        font-weight: bold;
        z-index: 2000;
        text-align: center;
        box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        animation: celebrationPop 0.6s ease;
    `;
    
    const messages = [
        'üéâ Toll gemacht!',
        '‚ú® Das verdient Anerkennung!',
        'üåü Du bist stark!',
        'üí´ Das z√§hlt wirklich!',
        'üéä Feiern wir das!'
    ];
    
    celebration.innerHTML = messages[Math.floor(Math.random() * messages.length)];
    document.body.appendChild(celebration);
    
    // Add celebration animation
    const style = document.createElement('style');
    style.textContent = `
        @keyframes celebrationPop {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }
    `;
    document.head.appendChild(style);
    
    // Remove after 2 seconds
    setTimeout(() => {
        celebration.style.animation = 'fadeOut 0.5s ease forwards';
        setTimeout(() => celebration.remove(), 500);
    }, 2000);
}

function updateTodaysAchievements() {
    const today = new Date().toISOString().split('T')[0];
    const todaysAchievements = antitodoData.achievements.filter(a => a.date === today);
    
    const container = document.getElementById('todaysList');
    
    if (todaysAchievements.length === 0) {
        container.innerHTML = '<p style="color: #95a5a6; text-align: center; font-style: italic;">Noch keine Erfolge heute anerkannt</p>';
        return;
    }
    
    container.innerHTML = todaysAchievements.map(achievement => `
        <div class="achievement-item">
            <div class="achievement-text-content">${achievement.text}</div>
            <div class="achievement-time">${new Date(achievement.timestamp).toLocaleTimeString('de-DE', { hour: '2-digit', minute: '2-digit' })}</div>
            <button class="delete-achievement" onclick="deleteAchievement(${achievement.id})" title="L√∂schen">‚ùå</button>
        </div>
    `).join('');
}

function updateCourageArchive() {
    const now = new Date();
    const sevenDaysAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
    
    const weekAchievements = antitodoData.achievements.filter(a => 
        new Date(a.timestamp) >= sevenDaysAgo
    );
    
    const summary = document.getElementById('archiveSummary');
    summary.textContent = `${weekAchievements.length} Erfolge in den letzten 7 Tagen anerkannt! üåà`;
    
    // Group by date for archive details
    const groupedByDate = {};
    weekAchievements.forEach(achievement => {
        const date = achievement.date;
        if (!groupedByDate[date]) {
            groupedByDate[date] = [];
        }
        groupedByDate[date].push(achievement);
    });
    
    const archiveDetails = document.getElementById('archiveDetails');
    const sortedDates = Object.keys(groupedByDate).sort().reverse();
    
    archiveDetails.innerHTML = sortedDates.map(date => {
        const dateObj = new Date(date);
        const dayName = dateObj.toLocaleDateString('de-DE', { weekday: 'long' });
        const dateStr = dateObj.toLocaleDateString('de-DE');
        
        return `
            <div style="margin-bottom: 20px;">
                <h4 style="color: #f39c12; margin-bottom: 10px;">${dayName}, ${dateStr}</h4>
                ${groupedByDate[date].map(achievement => `
                    <div class="achievement-item">
                        <div class="achievement-text-content">${achievement.text}</div>
                        <div class="achievement-time">${new Date(achievement.timestamp).toLocaleTimeString('de-DE', { hour: '2-digit', minute: '2-digit' })}</div>
                        <button class="delete-achievement" onclick="deleteAchievement(${achievement.id})" title="L√∂schen">‚ùå</button>
                    </div>
                `).join('')}
            </div>
        `;
    }).join('');
}

function toggleArchive() {
    const details = document.getElementById('archiveDetails');
    const button = document.querySelector('.show-archive-btn');
    
    if (details.classList.contains('hidden')) {
        details.classList.remove('hidden');
        button.textContent = 'Archiv verbergen';
    } else {
        details.classList.add('hidden');
        button.textContent = 'Archiv anzeigen';
    }
}

function deleteAchievement(id) {
    if (!confirm('Diesen Erfolg wirklich l√∂schen?')) return;
    
    antitodoData.achievements = antitodoData.achievements.filter(a => a.id !== id);
    updateTodaysAchievements();
    updateCourageArchive();
    saveAntitodoData();
}

function toggleReminder() {
    const checkbox = document.getElementById('reminderToggle');
    antitodoData.reminderEnabled = checkbox.checked;
    saveAntitodoData();
}

function checkDailyReminder() {
    if (!antitodoData.reminderEnabled) return;
    
    const today = new Date().toISOString().split('T')[0];
    const todaysAchievements = antitodoData.achievements.filter(a => a.date === today);
    
    // Only remind if no achievements today and not reminded today
    if (todaysAchievements.length === 0 && antitodoData.lastReminder !== today) {
        const now = new Date();
        const hour = now.getHours();
        
        // Show reminder between 17:00 and 22:00
        if (hour >= 17 && hour <= 22) {
            showDailyReminder();
            antitodoData.lastReminder = today;
            saveAntitodoData();
        }
    }
}

function showDailyReminder() {
    const reminder = document.createElement('div');
    reminder.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: linear-gradient(135deg, #f39c12, #e67e22);
        color: white;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        z-index: 1000;
        max-width: 320px;
        font-size: 16px;
        animation: slideIn 0.5s ease;
    `;
    
    reminder.innerHTML = `
        <div style="margin-bottom: 15px;">
            <strong>‚ú® Sanfte Erinnerung</strong><br>
            Heute schon anerkannt, was du nicht sichtbar geschafft hast?
        </div>
        <div style="display: flex; gap: 10px; justify-content: flex-end;">
            <button onclick="openAntitodoFromReminder()" style="
                background: white;
                color: #f39c12;
                border: none;
                padding: 8px 15px;
                border-radius: 8px;
                cursor: pointer;
                font-weight: bold;
                font-size: 14px;
            ">Ja, jetzt!</button>
            <button onclick="dismissReminder()" style="
                background: transparent;
                color: white;
                border: 1px solid white;
                padding: 8px 15px;
                border-radius: 8px;
                cursor: pointer;
                font-size: 14px;
            ">Sp√§ter</button>
        </div>
    `;
    
    reminder.id = 'dailyReminder';
    document.body.appendChild(reminder);
    
    // Auto-dismiss after 10 seconds
    setTimeout(() => {
        const reminderEl = document.getElementById('dailyReminder');
        if (reminderEl) dismissReminder();
    }, 10000);
}

function openAntitodoFromReminder() {
    dismissReminder();
    // Switch to antitodo page
    showPage('antitodo');
    // Open input immediately
    setTimeout(() => openAchievementInput(), 500);
}

function dismissReminder() {
    const reminder = document.getElementById('dailyReminder');
    if (reminder) {
        reminder.style.animation = 'slideOut 0.3s ease forwards';
        setTimeout(() => reminder.remove(), 300);
    }
}

// Data persistence
function saveAntitodoData() {
    try {
        localStorage.setItem('antitodoData', JSON.stringify(antitodoData));
    } catch (e) {
        console.log('Could not save antitodo data');
    }
}

function loadAntitodoData() {
    try {
        const saved = localStorage.getItem('antitodoData');
        if (saved) {
            antitodoData = { ...antitodoData, ...JSON.parse(saved) };
        }
        
        // Update reminder checkbox
        document.getElementById('reminderToggle').checked = antitodoData.reminderEnabled;
        
    } catch (e) {
        console.log('Could not load antitodo data');
    }
}

    </script>
</body>
</html>
